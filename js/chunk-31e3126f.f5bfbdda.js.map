{"version":3,"sources":["webpack:///./src/views/admin/AdministratorNewAnAccount.vue?7da9","webpack:///src/views/admin/AdministratorNewAnAccount.vue","webpack:///./src/views/admin/AdministratorNewAnAccount.vue?76da","webpack:///./src/views/admin/AdministratorNewAnAccount.vue","webpack:///./src/views/admin/AdministratorNewAnAccount.vue?5e04"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","beforeEnter","enter","staticClass","staticStyle","_v","ref","loginForm","rules","model","value","callback","$$v","$set","expression","$event","submitForm","staticRenderFns","name","setup","console","log","el","style","transform","opacity","gsap","duration","x","onComplete","done","Error","username","password","repeatPassword","role","context","refs","formName","validate","valid","register","response","data","code","$message","success","$router","push","error","component"],"mappings":"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","file":"js/chunk-31e3126f.f5bfbdda.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"appear\":\"\"},on:{\"before-enter\":_vm.beforeEnter,\"enter\":_vm.enter}},[_c('div',{attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"login-wrap\"},[_c('p',{staticStyle:{\"color\":\"#b5b2b2\"}},[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\"添加账户\")]),_c('el-form',{ref:\"loginForm\",staticClass:\"login-box\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"size\":\"medium\"}},[_c('el-divider',[_c('i',{staticClass:\"el-icon-loading\"})]),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"username\"}},[_c('label',[_vm._v(\"新增账号\")]),_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"password\"}},[_c('label',[_vm._v(\"密码\")]),_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"repeatPassword\"}},[_c('label',[_vm._v(\"重复密码\")]),_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请重复密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.repeatPassword),callback:function ($$v) {_vm.$set(_vm.loginForm, \"repeatPassword\", $$v)},expression:\"loginForm.repeatPassword\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"role\"}},[_c('label',[_vm._v(\"设定权限\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择权限\"},model:{value:(_vm.loginForm.role),callback:function ($$v) {_vm.$set(_vm.loginForm, \"role\", $$v)},expression:\"loginForm.role\"}},[_c('el-option',{attrs:{\"label\":\"管理员\",\"value\":\"ROLE_admin\"}}),_c('el-option',{attrs:{\"label\":\"超级管理员\",\"value\":\"ROLE_superAdmin\"}})],1)],1),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn block\",attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.submitForm('loginForm')}}},[_vm._v(\" 注册添加 \")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition\r\n      appear\r\n      @before-enter=\"beforeEnter\"\r\n      @enter=\"enter\">\r\n    <div id=\"login\">\r\n      <div class=\"login-wrap\">\r\n        <p style=\"color: #b5b2b2\"><i class=\"el-icon-user\"></i>添加账户</p>\r\n        <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"rules\" class=\"login-box\" size=\"medium\">\r\n          <el-divider><i class=\"el-icon-loading\"></i></el-divider>\r\n          <el-form-item prop=\"username\" class=\"form-item\">\r\n            <label>新增账号</label>\r\n            <el-input type=\"text\" placeholder=\"请输入账号\"\r\n                      v-model=\"loginForm.username\"/><!--<span style=\"color: white\">{{tips}}</span>-->\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\" class=\"form-item\">\r\n            <label>密码</label>\r\n            <el-input type=\"password\" placeholder=\"请输入密码\" show-password v-model=\"loginForm.password\"/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"repeatPassword\" class=\"form-item\">\r\n            <label>重复密码</label>\r\n            <el-input type=\"password\" placeholder=\"请重复密码\" v-model=\"loginForm.repeatPassword\" show-password/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"role\" class=\"form-item\">\r\n            <label>设定权限</label>\r\n            <el-select v-model=\"loginForm.role\" placeholder=\"请选择权限\">\r\n              <el-option label=\"管理员\" value=\"ROLE_admin\"></el-option>\r\n              <el-option label=\"超级管理员\" value=\"ROLE_superAdmin\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"danger\" class=\"login-btn block\" @click=\"submitForm('loginForm')\">\r\n              注册添加\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport {reactive, ref, isRef, toRefs, onMounted,} from '@vue/composition-api'\r\nimport {adminRegister} from \"@/api/login\";\r\nimport gsap from \"gsap\";\r\n\r\nexport default {\r\n  name: \"AdministratorNewAnAccount\",\r\n  setup(props, context) {\r\n\r\n    const {$message} = context.root //类似的:  const { $store, $message, $router, $route } = context.root\r\n    const {$router} = context.root\r\n    const {$store} = context.root\r\n\r\n    const beforeEnter = ((el) => {\r\n      console.log(\"beforeEnter-- set initial state 设置初始化状态\")\r\n      el.style.transform = 'translateX(100px)'\r\n      el.style.opacity = 0\r\n    })\r\n    const enter = ((el, done) => {\r\n      console.log(\" starting to enter-- make transition 开始动画\")\r\n      gsap.to(el, {\r\n        duration: 0.5,\r\n        x: 0,\r\n        opacity: 1,\r\n        onComplete: done,\r\n      })\r\n    })\r\n\r\n\r\n    let validateUsername = (rule, value, callback) => {\r\n      let regex = /^[0-9a-zA-Z]{5,15}$/;\r\n      if (value === '') {\r\n        callback(new Error('请输入您的账号'));\r\n      } else if (!regex.test(value)) {\r\n        callback(new Error('输入的账号格式有误,需5-15位数字字母'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    let validatePassword = (rule, value, callback) => {\r\n      let regex = /^[0-9a-zA-Z]{5,25}$/;\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'));\r\n      } else if (!regex.test(value)) {\r\n        callback(new Error('请检查您的密码,需5到25位数字字母'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    let validateRepeatPassword = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请重复密码'));\r\n      } else if (value !== loginForm.password) {\r\n        callback(new Error('密码不一致'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n\r\n    const loginForm = reactive({\r\n      username: '',\r\n      password: '',\r\n      repeatPassword: '',\r\n      role: ''\r\n    })\r\n\r\n    const rules = reactive({\r\n      username: [\r\n        {validator: validateUsername, trigger: 'blur'}],\r\n      password: [\r\n        {validator: validatePassword, trigger: 'blur'}],\r\n      repeatPassword: [{validator: validateRepeatPassword, trigger: 'blur'}],\r\n      role: [{required: true, message: '权限不能为空', trigger: 'blur'}]\r\n    })\r\n\r\n    const submitForm = ((formName) => {\r\n      context.refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          register();\r\n        } else {\r\n          console.log('error submit');\r\n          return false;\r\n        }\r\n      })\r\n    })\r\n\r\n    const register = (() => {\r\n      let requestData = {\r\n        username: loginForm.username,\r\n        password: loginForm.password,\r\n        role: loginForm.role\r\n      }\r\n      adminRegister(requestData).then((response) => {\r\n        if (response.data.code !== 2001 && response.data.code !== 3001) {\r\n          console.log(response.data)\r\n          //$store.dispatch('asyncUpdateUser', {username: requestData.username,role: requestData.role})\r\n          console.log('注册结果');\r\n          console.log(response);\r\n          $message.success(\"注册成功,请管理员登录\");\r\n          $router.push('/admin/administratorLogin');\r\n        } else {\r\n          $message.error(\"权限不足,请检查\");\r\n          console.log(response.data);\r\n        }\r\n      }).catch(error => {\r\n      })\r\n    })\r\n\r\n\r\n    /*\r\n        const tips =ref('')\r\n\r\n        const checkUsername =((loginForm.username)=>{\r\n          //请求接口返回用户名列表userList\r\n          if(loginForm.username in userList){\r\n            tips.value='用户名已存在'\r\n          }else{tips.value='可以注册'}\r\n        })\r\n\r\n        watch(()=>{\r\n          loginForm.username: function(val){checkUsername(val);}\r\n        })\r\n    */\r\n\r\n\r\n    return {\r\n      loginForm,\r\n      rules,\r\n      submitForm,\r\n\r\n      register,\r\n      beforeEnter,\r\n      enter\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#login {\r\n  //height: 100vh;\r\n  background-color: #220d07;\r\n  display: flex;\r\n  overflow-x: auto;\r\n  flex: none;\r\n}\r\n\r\n.login-wrap {\r\n  width: 335px;\r\n  margin: auto;\r\n}\r\n\r\n.menu-tab {\r\n  text-align: center;\r\n\r\n  li {\r\n    display: inline-block;\r\n    width: 88px;\r\n    line-height: 36px;\r\n    font-size: 14px;\r\n    color: azure;\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .current {\r\n    background-color: #2C3A47;\r\n  }\r\n}\r\n\r\n\r\n.login-box {\r\n  //margin-top: 5px;\r\n  margin-bottom: 15px;\r\n\r\n  label {\r\n    display: block;\r\n    margin-bottom: 3px;\r\n    font-size: 14px;\r\n    color: azure;\r\n  }\r\n\r\n  .form-item {\r\n    margin-bottom: 13px;\r\n  }\r\n\r\n  .block {\r\n    width: 100%;\r\n    display: block;\r\n  }\r\n\r\n  .login-btn {\r\n    margin-top: 15px;\r\n  }\r\n}\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorNewAnAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorNewAnAccount.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdministratorNewAnAccount.vue?vue&type=template&id=0964a209&scoped=true&\"\nimport script from \"./AdministratorNewAnAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./AdministratorNewAnAccount.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdministratorNewAnAccount.vue?vue&type=style&index=0&id=0964a209&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0964a209\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorNewAnAccount.vue?vue&type=style&index=0&id=0964a209&lang=scss&scoped=true&\""],"sourceRoot":""}