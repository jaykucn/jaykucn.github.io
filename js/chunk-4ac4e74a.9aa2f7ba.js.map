{"version":3,"sources":["webpack:///./src/views/admin/AdministratorModify.vue?bdd3","webpack:///src/views/admin/AdministratorModify.vue","webpack:///./src/views/admin/AdministratorModify.vue?f5da","webpack:///./src/views/admin/AdministratorModify.vue","webpack:///./src/views/admin/AdministratorModify.vue?ebd8"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","beforeEnter","enter","staticClass","staticStyle","_v","ref","loginForm","rules","model","value","callback","$$v","$set","expression","$store","getters","getUser","role","$event","submitForm","staticRenderFns","name","setup","console","log","el","style","transform","opacity","gsap","duration","y","onComplete","done","Error","username","password","newPassword","repeatNewPassword","context","refs","formName","validate","valid","modify","response","data","code","$message","success","$router","push","error","component"],"mappings":"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","file":"js/chunk-4ac4e74a.9aa2f7ba.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"appear\":\"\"},on:{\"before-enter\":_vm.beforeEnter,\"enter\":_vm.enter}},[_c('div',{attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"login-wrap\"},[_c('p',{staticStyle:{\"color\":\"#b5b2b2\"}},[_c('i',{staticClass:\"el-icon-unlock\"}),_vm._v(\"账户修改\")]),_c('el-form',{ref:\"loginForm\",staticClass:\"login-box\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"size\":\"medium\"}},[_c('el-divider',[_c('i',{staticClass:\"el-icon-edit-outline\"})]),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"username\"}},[_c('label',[_vm._v(\"账号\")]),_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"password\"}},[_c('label',[_vm._v(\"密码\")]),_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"newPassword\"}},[_c('label',[_vm._v(\"新密码\")]),_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入您的新密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.newPassword),callback:function ($$v) {_vm.$set(_vm.loginForm, \"newPassword\", $$v)},expression:\"loginForm.newPassword\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"repeatNewPassword\"}},[_c('label',[_vm._v(\"重复新密码\")]),_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请重复您的新密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.repeatNewPassword),callback:function ($$v) {_vm.$set(_vm.loginForm, \"repeatNewPassword\", $$v)},expression:\"loginForm.repeatNewPassword\"}})],1),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"role\"}},[_c('label',[_vm._v(\"设定权限\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择权限\",\"disabled\":_vm.$store.getters.getUser.role === '管理员'},model:{value:(_vm.loginForm.role),callback:function ($$v) {_vm.$set(_vm.loginForm, \"role\", $$v)},expression:\"loginForm.role\"}},[_c('el-option',{attrs:{\"label\":\"管理员\",\"value\":\"ROLE_admin\"}}),_c('el-option',{attrs:{\"label\":\"超级管理员\",\"value\":\"ROLE_superAdmin\"}})],1)],1),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn block\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.submitForm('loginForm')}}},[_vm._v(\" 确认修改 \")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition\r\n      appear\r\n      @before-enter=\"beforeEnter\"\r\n      @enter=\"enter\">\r\n    <div id=\"login\">\r\n      <div class=\"login-wrap\">\r\n        <p style=\"color: #b5b2b2\"><i class=\"el-icon-unlock\"></i>账户修改</p>\r\n        <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"rules\" class=\"login-box\" size=\"medium\">\r\n          <el-divider><i class=\"el-icon-edit-outline\"></i></el-divider>\r\n          <el-form-item prop=\"username\" class=\"form-item\">\r\n            <label>账号</label>\r\n            <el-input type=\"text\" placeholder=\"请输入账号\"\r\n                      v-model=\"loginForm.username\"/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\" class=\"form-item\">\r\n            <label>密码</label>\r\n            <el-input type=\"password\" placeholder=\"请输入密码\" show-password v-model=\"loginForm.password\"/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"newPassword\" class=\"form-item\">\r\n            <label>新密码</label>\r\n            <el-input type=\"password\" placeholder=\"请输入您的新密码\" show-password v-model=\"loginForm.newPassword\"/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"repeatNewPassword\" class=\"form-item\">\r\n            <label>重复新密码</label>\r\n            <el-input type=\"password\" placeholder=\"请重复您的新密码\" v-model=\"loginForm.repeatNewPassword\" show-password/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"role\" class=\"form-item\">\r\n            <label>设定权限</label>\r\n            <el-select v-model=\"loginForm.role\" placeholder=\"请选择权限\" :disabled=\"$store.getters.getUser.role === '管理员'\">\r\n              <el-option label=\"管理员\" value=\"ROLE_admin\"></el-option>\r\n              <el-option label=\"超级管理员\" value=\"ROLE_superAdmin\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"success\" class=\"login-btn block\" @click=\"submitForm('loginForm')\">\r\n              确认修改\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport {reactive, ref, isRef, toRefs, onMounted,} from '@vue/composition-api'\r\nimport {adminModify, adminRegister} from \"@/api/login\";\r\nimport gsap from \"gsap\";\r\n\r\nexport default {\r\n  name: \"AdministratorModify\",\r\n  setup(props, context) {\r\n\r\n    const {$message} = context.root //类似的:  const { $store, $message, $router, $route } = context.root\r\n    const {$router} = context.root\r\n    const {$store} = context.root\r\n\r\n    const beforeEnter = ((el) => {\r\n      console.log(\"beforeEnter-- set initial state 设置初始化状态\")\r\n      el.style.transform = 'translateY(-100px)'\r\n      el.style.opacity = 0\r\n    })\r\n    const enter = ((el, done) => {\r\n      console.log(\" starting to enter-- make transition 开始动画\")\r\n      gsap.to(el, {\r\n        duration: 0.5,\r\n        y: 0,\r\n        opacity: 1,\r\n        onComplete: done,\r\n      })\r\n    })\r\n\r\n\r\n    let validateUsername = (rule, value, callback) => {\r\n      let regex = /^[0-9a-zA-Z]{5,15}$/;\r\n      if (value === '') {\r\n        callback(new Error('请输入您的账号'));\r\n      } else if (!regex.test(value)) {\r\n        callback(new Error('输入的账号格式有误,需5-15位数字字母'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    let validatePassword = (rule, value, callback) => {\r\n      let regex = /^[0-9a-zA-Z]{5,25}$/;\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'));\r\n      } else if (!regex.test(value)) {\r\n        callback(new Error('请检查您的密码,需5到25位数字字母'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    let validateNewPassword = (rule, value, callback) => {\r\n      let regex = /^[0-9a-zA-Z]{5,25}$/;\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'));\r\n      } else if (!regex.test(value)) {\r\n        callback(new Error('请检查您的密码,需5到25位数字字母'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    let validateRepeatNewPassword = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请重复新密码'));\r\n      } else if (value !== loginForm.newPassword) {\r\n        callback(new Error('密码不一致'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n\r\n    const loginForm = reactive({\r\n      username: '',\r\n      password: '',\r\n      newPassword: '',\r\n      repeatNewPassword: '',\r\n      role: ($store.getters.getUser.role === '超级管理员') ? 'ROLE_superAdmin' : 'ROLE_admin'\r\n    })\r\n\r\n    const rules = reactive({\r\n      username: [\r\n        {validator: validateUsername, trigger: 'blur'}],\r\n      password: [\r\n        {validator: validatePassword, trigger: 'blur'}],\r\n      newPassword: [\r\n        {validator: validateNewPassword, trigger: 'blur'}],\r\n      repeatNewPassword: [{validator: validateRepeatNewPassword, trigger: 'blur'}],\r\n      role: [{required: true, message: '权限不能为空', trigger: 'blur'}]\r\n    })\r\n\r\n    const submitForm = ((formName) => {\r\n      context.refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          modify();\r\n        } else {\r\n          console.log('error submit');\r\n          return false;\r\n        }\r\n      })\r\n    })\r\n\r\n    const modify = (() => {\r\n      let requestData = {\r\n        username: loginForm.username,\r\n        password: loginForm.password,\r\n        newPassword: loginForm.newPassword,\r\n        role: loginForm.role\r\n      }\r\n      adminModify(requestData).then((response) => {\r\n        if (response.data.code !== 2001) {\r\n          console.log(response.data)\r\n          //$store.dispatch('asyncUpdateUser', {username: requestData.username,role: requestData.role})\r\n          console.log('修改结果');\r\n          console.log(response);\r\n          $message.success(\"修改成功\");\r\n          $router.push('/admin/administratorLogin');\r\n        } else {\r\n          $message.error(\"权限不足\")\r\n          console.log(response.data);\r\n        }\r\n      }).catch(error => {\r\n        $message.error(\"账号或密码不准确，请检查\");\r\n      })\r\n    })\r\n\r\n    /*const register = (() => {\r\n       let requestData = {\r\n         username: loginForm.username,\r\n         password: loginForm.password\r\n       }\r\n       adminRegister(requestData).then((response) => {\r\n         console.log('注册成功');\r\n         console.log(response.data);\r\n         $message.success(\"恭喜你,注册成功\");\r\n         context.refs['loginForm'].resetFields();\r\n         $router.go(0);\r\n       }).catch(error => {\r\n       })\r\n     })*/\r\n\r\n\r\n    return {\r\n      loginForm,\r\n      rules,\r\n      submitForm,\r\n\r\n      modify,\r\n      beforeEnter,\r\n      enter\r\n    }\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#login {\r\n  //height: 100vh;\r\n  background-color: #220d07;\r\n  display: flex;\r\n  overflow-x: auto;\r\n  flex: none;\r\n}\r\n\r\n.login-wrap {\r\n  width: 335px;\r\n  margin: auto;\r\n}\r\n\r\n.menu-tab {\r\n  text-align: center;\r\n\r\n  li {\r\n    display: inline-block;\r\n    width: 88px;\r\n    line-height: 36px;\r\n    font-size: 14px;\r\n    color: azure;\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .current {\r\n    background-color: #2C3A47;\r\n  }\r\n}\r\n\r\n\r\n.login-box {\r\n  //margin-top: 5px;\r\n  margin-bottom: 15px;\r\n\r\n  label {\r\n    display: block;\r\n    margin-bottom: 3px;\r\n    font-size: 14px;\r\n    color: azure;\r\n  }\r\n\r\n  .form-item {\r\n    margin-bottom: 13px;\r\n  }\r\n\r\n  .block {\r\n    width: 100%;\r\n    display: block;\r\n  }\r\n\r\n  .login-btn {\r\n    margin-top: 15px;\r\n  }\r\n}\r\n\r\n\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorModify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorModify.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdministratorModify.vue?vue&type=template&id=39b081e9&scoped=true&\"\nimport script from \"./AdministratorModify.vue?vue&type=script&lang=js&\"\nexport * from \"./AdministratorModify.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdministratorModify.vue?vue&type=style&index=0&id=39b081e9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39b081e9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdministratorModify.vue?vue&type=style&index=0&id=39b081e9&lang=scss&scoped=true&\""],"sourceRoot":""}